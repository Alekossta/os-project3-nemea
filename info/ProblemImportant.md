Ο κάθε πελάτης που φτάνει στο μπαρ πρέπει πρώτα να πάρει μια διαθέσιμη καρέκλα από ένα τραπέζι και μετά να παραγγείλει.

Το υπαίθριο μπαρ διαθέτει 3 τραπέζια με 4 καρέκλες το καθένα.

Ο χώρος διευθύνεται από έναν υπεύθυνο υποδοχής (ή απλά ‘υπεύθυνο’) ο οποίος παίρνει παραγγελίες από πελάτες που καταφθάνουν και τους/τις εξυπηρετεί με την σειρά που οι πελάτες εμφανίζονται στο τραπέζι σερβιρίσματος.

Ο κάθε πελάτης μπορεί να παραγγείλει κρασί ή νερό καθώς επίσης τυρί ή/και σαλάτα. 

Αφού ο κάθε πελάτης παραλάβει αυτά που επιθυμεί κάθεται στο τραπέζι και αρχίζει και ‘συνομιλεί’ με τους υπόλοιπους στο τραπέζι αν υπάρχουν, και να τρώει ή να πίνει.

Οταν ένα τραπέζι γεμίσει, δεν μπορεί να δεχτεί κάποιον επιπλέον πελάτη ακόμα και αν ένας ή πιο πολλοί πελάτες αποχωρήσουν από το συγκεκριμένο τραπέζι. Το τραπέζι για να ‘εξυπηρετήσει΄ νέους πελάτες θα πρέπει να εκκενωθεί «πλήρως από όλους τους προηγούμενους που έτρωγαν, έπιναν και συζητούσαν μέχρι τώρα». 

Αν δεν υπάρχει καρέκλα διαθέσιμη σε τραπέζι, ο επισκέπτης περιμένει για το πρώτο τραπέζι που θα αδειάσει πλήρως και θα γίνει διαθέσιμο.

Οι επισκέπτες και ο υπεύθυνος συγχρονίζονται χρησιμοποιώντας σήματα P() και V() και καταγράφουν πληροφορίες που κρίνεται απαραίτητο σε ένα shared memory segment όπου διατηρούνται επιπλέον και τα στατιστικά στοιχεία για το σέρβις που προσφέρει το «Μπαρ στο Μονοπάτι για Νεμέα».

χρησιμοποιήσετε POSIX Semaphores για να υλοποιήσετε τη λύση σας που θα εμπεριέχει σχετικές κλήσεις P() και V(),

δημιουργήσετε ένα shared memory segment προσπελάσιμο από διεργασίες ώστε να γίνεται σωστή καταγραφή των λειτουργιών σε εξέλιξη και των στατιστικών

παρέχετε τη δυνατότητα τα προγράμματά σας να παραμείνουν ‘εργαζόμενα’ για περιόδους χρόνου που καθορίζονται από τους χρήστες

έχετε προγράμματα-επισκέπτες που μεταβάλλουν, με την λήξη τους, τα στατιστικά που διατηρούνται από το μπαρ και τα οποία στο τέλος της λειτουργίας του υπεύθυνου παρουσιάζονται στο σχετικό tty

μπορεί ένα ανεξάρτητο πρόγραμμα που ονομάζεται monitor σε οποιαδήποτε χρονική στιγμή να παρουσιάζει την επικρατούσα κατάσταση στο μπαρ σε σχέση με τις διαθέσιμες καρέκλες/τραπέζια αλλά και την κατανάλωση προϊόντων μέχρι στιγμής.

Τέλος θα πρέπει να επιδείξετε την ορθότητα της λύσης σας με τα διάφορα προγράμματα πιθανόν να εκτελούνται από διαφορετικά ttys και υιοθετώντας ένα μηχανισμό ιστορικού–των–γεγονότων (logging).

Οχρόνος άφιξης των επισκεπτών είναι τυχαίος. Καθώς ένας επισκέπτης φτάνει στο μπαρ, πρώτα θα επιχειρήσει να ‘πάρει’ μια καρέκλα.
 
Η πολιτική του μπαρ είναι ότι μέχρι 4 το πολύ επισκέπτες που φτάνουν ο ένας μετά τον άλλον, καταλαμβάνουν καρέκλες στο ίδιο τραπέζι. Οι επόμενοι 4 στο επόμενο τραπέζι και ούτω καθεξής.

Ο χρόνος άφιξης των επισκεπτών είναι τυχαίος. Καθώς ένας επισκέπτης φτάνει στο μπαρ, πρώτα θα επιχειρήσει να ‘πάρει’ μια καρέκλα. Η πολιτική του μπαρ είναι ότι μέχρι 4 το πολύ επισκέπτες που φτάνουν ο ένας μετά τον άλλον, καταλαμβάνουν καρέκλες στο ίδιο τραπέζι. Οι επόμενοι 4 στο επόμενο τραπέζι και ούτω καθεξής.

΄Οταν ένας επισκέπτης πάρει μια καρέκλα, θα ‘προχωρήσει’ μέχρι το τραπέζι εξυπηρέτησής του μπαρ και θα αγοράσει (1) νερό/κρασί (ένα από τα δύο υποχρεωτικά!– μπορεί και τα δύο), (2) 100 γρμ. τοπικό τυρί (προαιρετικό) και (3) μια σαλάτα (προαιρετική). Το τι τελικά αγοράζεται από τον κάθε επισκέπτη απο τις διαθέσιμες επιλογές στο μενού, είναι τυχαία επιλογή του καθενός. Ο υπεύθυνος μπορεί να εξυπηρετήσει 1-επισκέπτη την φορά και η εν λόγω διαδικασία παραγγελίας διαρκεί μέχρι ένα μέγιστο αριθμό από δευτερόλεπτα που ορίζονται στην γραμμή εντολής του προγράμματος receptionist.

΄Οταν ο επισκέπτης πάρει την παραγγελία του, κάθεται στο τραπέζι του και αρχίζει να τρώει/πίνει και να ‘συνομιλεί΄ με τους άλλους το πολύ 3 συνδαιτυμόνες που βρίσκονται στο συγκεκριμένο τραπέζι. Μετά από ένα τυχαίο διάστημα χρόνου με μέγιστο αριθμό από δευτερόλεπτα που ορίζονται στην γραμμή του προγράμματος visitor, ο επισκέπτης αναχωρεί.

Οταν ένας επισκέπτης ετοιμάζεται να αναχωρήσει, θα πρέπει να καταγράψει το χρόνο της επίσκεψής του αλλά και τα προϊόντα που κατανάλωσε ώστε στο τέλος της ημέρας να μπορεί το υπεύθυνος να δημιουργήσει στατιστικά κατανάλωσης και μέσο χρονικό όρο επίσκεψής πελατών.

Κανένας πελάτης δεν πρέπει να γνωρίσει λιμό.
Ο υπεύθυνος εξυπηρετεί ένα πελάτη την φορά.
Η εξυπηρέτηση ενός πελάτη από τον υπεύθυνο μπορεί να διαρκέσει για τυχαίο αριθμό από δευτερόλεπτα στο εύρος [0.50 ∗ torder .. torder]
Η διάρκεια που ένας πελάτης μένει στο τραπέζι του είναι μεταξύ [0.70 ∗ trest .. trest] δευτερόλεπτα
Η χρονική διάρκεια που μια διεργασία αναμένεται να ‘περιμένει’ ή να ‘συνδιαλέγεται΄ με άλλες, υλοποιείται κάνοντας sleep().

Στην υλοποίησή σας θα πρέπει να εισαγάγετε και ένα shared memory segment όπου θα πρέπει να διατηρούνται δομές για την κατάσταση που επικρατεί στα τραπέζια σε οποιαδήποτε χρονική στιγμή αλλά και στατιστικά για την χρήση των προϊόντων που καταναλώνονται, το μέσο όρο που οι επισκέπτες παραμένουν στο μπαρ, αλλά και τον αριθμό των επισκεπτών που υπάρχουν μέχρι στιγμής.

Για παράδειγμα, θα ήταν καλή ιδέα να αναπτύξετε ένα πρόγραμμα που δημιουργεί το shared memory segment, αρχικοποιεί δομές και καταστάσεις, και τέλος γνωστοποιεί το ID του κοινού τμήματος στους αναγνώστες/συγγραφείς. Το εν λόγω πρόγραμμα θα μπορούσε να αρχικοποιήσει και τους σηματοφόρους που είναι απαραίτητοι για την λύση χωρίς λιμό που επιθυμούμε.

Μπορείτε να επικαλεστείτε τα προγράμματα από διαφορετικά ttys ή αν θέλετε να χρησιμοποιήσετε μια ιεραρχία από forks()/exec*() που να δημιουργούν το απαραίτητο συνολικό αποτέλεσμα εκτελέσεως πολλαπλών επισκεπτών. Τα προγράμματά σας θα πρέπει να δημιουργούν εξόδους που εύκολα μπορούν να δείξουν την ορθότητα αλλά και το ταυτόχρονο της εκτέλεσής τους.

Πριν ολοκληρωθεί η εκτέλεση των παραπάνω προγραμμάτων, θα πρέπει να υπολογιστούν και να τυπωθούν τα παρακάτω στατιστικά: 1. Αριθμός των επισκεπτών του μπαρ. 2. Μέσο χρονικό διάστημα στο οποίο οι επισκέπτες παρέμειναν στο μπαρ. 3. Μέσο χρόνο αναμονής που χρειάστηκαν οι επισκέπτες πριν τελικά καταλάβουν μια καρέκλα. 4. Αριθμός των παραγγελιών που έγιναν όσον αφορά στην κατανάλωση ποτών, μερίδων τυριών και σαλάτας από όλους τους επισκέπτες

Στο τέλος της εκτέλεσης όλων των αναγνωστών/συγγραφέων, επιβάλλεται ένα πρόγραμμα–που μπορεί να είναι ο receptionist– να καθαρίσει και να διαγράψει το κοινό τμήμα μνήμης και τους σηματοφόρους που χρησιμοποιήθηκαν. Η απελευθέρωση (purging) τέτοιων πόρων είναι επιτακτική. Σε διαφορετική περίπτωση υπάρχει κίνδυνος ο πυρήνας να μην μπορεί να εξυπηρετήσει μέλλουσες ανάγκες σε κοινή μνήμη και σηματοφόρους.

Η εφαρμογή μπορεί να κληθεί με τον παρακάτω τρόπο στη γραμμή εντολής 
(tty): ./receptionist-d ordertime-s shmid 
όπου ./receptionist είναι το εκτελέσιμο του υπευθύνου του μπαρ και μπορεί να έχει τουλάχιστον τις παρακάτω σημαίες: 
•-d ordertime παρέχει την μέγιστη δυνατή περίοδο στην οποία ο υπεύθυνος χρειάζεται για να εξυπηρετήσει ένα επισκέπτη με την παραγγελία του. 
•-s shmid δίνει το κλειδί που το κοινό τμήμα μνήμης έχει (και όπου υπάρχουν αντικείμενα κοινού ενδιαφέροντος).

./visitor-d resttime-s shmid
όπου ./visitor είναι το εκτελέσιμο και οι σχετικές σημαίες είναι: 
•-d resttime παρέχει την μέγιστη δυνατή περίοδο στην οποία ο επισκέπτης παραμένει στο τραπέζι αφότου έχει εξυπηρετηθεί από τον υπεύθυνο (σε κατάσταση sleep). 
•-s shmid δίνει το κλειδί που το κοινό τμήμα μνήμης έχει (και όπου υπάρχουν αντικείμενα κοινού ενδιαφέροντος).  

Ο monitor μπορει να προσπελάσει την κοινή μνήμη και παρέχει το status quo του μπαρ ως εξής: ./monitor-s shmid 
όπου ./monitor είναι το εκτελέσιμο και ή σχετική σημαία είναι: 
•-s shmid δίνει το κλειδί που το κοινό τμήμα μνήμης έχει (και όπου υπάρχουν αντικείμενα κοινού ενδιαφέροντος).